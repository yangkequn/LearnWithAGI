"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7171],{7171:function(e,s,l){l.r(s);var a=l(5893),i=l(7294),t=l(7922),d=l(6901),r=l(6624),c=l(4472),n=l(9788),x=l(465),m=l(4178),u=l(1138),f=l(7379);s.default=function(){var e,s,l,h,o;let j=(0,f.useRouter)(),[v,N]=i.useState(0),[p,w]=i.useState({0:!1,1:!1,2:!1}),[y,g]=(0,i.useState)(null),{openAlert:b,setOpenAlert:_}=(0,i.useContext)(m.GlobalContext),[C,P]=(0,i.useState)("alipay"),k=e=>{g(e)},[S,T]=(0,i.useState)([]);(0,i.useEffect)(()=>{(0,u.bl)("OrderPlanes").then(e=>{T(e)})},[]);let[D,O]=(0,i.useState)(""),[Z,A]=(0,i.useState)(""),[G,E]=(0,i.useState)("");return(0,i.useEffect)(()=>{if(G)var e=setInterval(()=>(0,u.bl)("OrderCheckState",{TradeNumber:G}).then(s=>{(null==s?void 0:s.Paid)===!0&&(clearInterval(e),w({...p,2:!0}),_("支付成功，正在跳转到订单页面"),setTimeout(()=>j.push("/UserCenter?page=Order"),2e3))}),5e3)},[G]),(0,a.jsxs)("div",{className:"flex flex-col justify-start h-full items-center font-sans w-full",children:[(0,a.jsx)(t.Z,{in:!!b,className:"flex w-full justify-center text-lg items-center",children:(0,a.jsx)(d.Z,{severity:"info",className:" self-center",children:b})}),(0,a.jsx)(r.Z,{nonLinear:!0,activeStep:v,sx:{width:"600px",mt:2},children:["选择服务","确认订单","支付订单","查看订单"].map((e,s)=>(0,a.jsx)(c.Z,{completed:p[s],children:(0,a.jsx)(n.Z,{color:"inherit",onClick:e=>N(s),children:e})},e))}),0===v&&(0,a.jsxs)("div",{className:"  flex-col justify-start items-center w-full h-full  min-w-[600px] text-base max-w-xl mt-4  ",children:[(0,a.jsxs)("div",{className:"grid grid-cols-[8%_16%_52%_12%_12%] leading-10 ",children:[(0,a.jsx)("div",{className:"",children:" "}),(0,a.jsx)("div",{className:"",children:" 等级 "}),(0,a.jsx)("div",{className:"",children:" 服务内容 "}),(0,a.jsx)("div",{className:"",children:" 价格 "}),(0,a.jsx)("div",{className:"",children:" 时长 "})]}),(null==S?void 0:S.length)>0&&S.map((e,s)=>(0,a.jsxs)("div",{className:"grid grid-cols-[8%_16%__52%_12%_12%] leading-10 ",children:[(0,a.jsxs)("div",{className:"",children:[" ",(0,a.jsx)(x.Z,{value:e.Name,checked:(null==y?void 0:y.Name)==e.Name,onChange:s=>k(e)})," "]}),(0,a.jsx)("div",{className:"",children:e.Name}),(0,a.jsx)("div",{className:"",children:e.Describe}),(0,a.jsxs)("div",{className:"",children:[" ",e.Price+"元"," "]}),(0,a.jsxs)("div",{className:"",children:[" ",e.DurationDay,"天 "]})]},"serive-".concat(e,"=").concat(s))),(0,a.jsxs)("div",{className:"flex flex-col justify-center items-center w-full   min-w-[600px] text-base max-w-xl mt-4",children:[(0,a.jsxs)("div",{className:"flex flex-row justify-center items-center w-full h-full  min-w-[600px] text-base max-w-xl  bg-blue-50 rounded-xl px-2 py-1",children:[null!==(e=null==y?void 0:y.Name)&&void 0!==e?e:""," 每日可用限额说明"]},"订单详情说明"),(0,a.jsxs)("div",{className:"grid grid-cols-[25%_25%_25%_25%] leading-10 w-full",children:[(0,a.jsx)("div",{className:"",children:"   "}),(0,a.jsx)("div",{className:"",children:" ChatGPT3.5 "}),(0,a.jsx)("div",{className:"",children:" ChatGPT4 "}),(0,a.jsx)("div",{className:"",children:" 新建课程 "})]},"每日剩余可用次数"),(0,a.jsxs)("div",{className:"grid grid-cols-[25%_25%_25%_25%] leading-10  w-full",children:[(0,a.jsx)("div",{className:"",children:"  "}),(0,a.jsxs)("div",{className:"",children:[" ",null!==(s=null==y?void 0:y.AllowedDayGPT35)&&void 0!==s?s:0," "]}),(0,a.jsxs)("div",{className:"",children:[" ",null!==(l=null==y?void 0:y.AllowedDayGPT4)&&void 0!==l?l:0," "]}),(0,a.jsxs)("div",{className:"",children:[" ",null!==(h=null==y?void 0:y.AllowedDaySkill)&&void 0!==h?h:0," "]})]})]}),(0,a.jsx)("div",{className:"flex flex-row  w-[500px] justify-end mt-4 gap-4 pl-8",children:(0,a.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",onClick:e=>{if(!y)return _("请选择服务");w({...p,0:!0}),N(1)},children:"下一步"})})]},"套餐种类"),1===v&&p[0]&&(0,a.jsxs)("div",{className:"flex flex-col justify-start items-center w-full  min-w-[600px] text-base max-w-xs mt-8  ",children:[(0,a.jsx)("div",{className:"flex flex-row  w-[500px] justify-start mt-6",children:" 您正在购买服务： "}),(0,a.jsxs)("div",{className:"  w-[500px]  grid grid-cols-[15%_55%_15%_15%] leading-10 mt-4 gap-4 pl-8",children:[(0,a.jsx)("div",{className:"",children:" 名称 "}),(0,a.jsx)("div",{className:"",children:" 服务内容 "}),(0,a.jsx)("div",{className:"",children:" 价格 "}),(0,a.jsx)("div",{className:"",children:" 时长"}),(0,a.jsx)("div",{className:"",children:y.Name}),(0,a.jsx)("div",{className:"",children:y.Describe}),(0,a.jsxs)("div",{className:"",children:[" ",y.Price+"元"," "]}),(0,a.jsxs)("div",{className:"",children:[" ",y.DurationDay+"天"," "]})]}),(0,a.jsx)("div",{className:"flex-row  w-[500px]  justify-start items-center h-full max-w-lg gap-4 text-base self-center mt-8 ",children:"请选择支付方式："},"pay-type"),(0,a.jsxs)("div",{className:"flex flex-row  w-[500px] justify-start mt-4 gap-4 pl-8",children:[(0,a.jsxs)("div",{className:"",children:[" ",(0,a.jsx)(x.Z,{value:"alipay",checked:"alipay"==C,onChange:e=>P("alipay")})," 支付宝 "]}),(0,a.jsxs)("div",{className:"",children:[" ",(0,a.jsx)(x.Z,{value:"wxpay",checked:"wxpay"==C,onChange:e=>P("wxpay")})," 微信支付 "]})]}),(0,a.jsx)("div",{className:"flex flex-row  w-[500px] justify-end mt-4 gap-4 pl-8",children:(0,a.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",onClick:e=>{var s=setTimeout(()=>{_("未能创建订单，请稍后再试")},5e3);(0,u.bl)("CreateOrder7Pay",{Name:y.Name,PayType:C}).then(e=>{if(!(null==e?void 0:e.PayUrl)||!(null==e?void 0:e.QrCode))return _("未能创建订单，请稍后再试");clearTimeout(s),w({...p,1:!0}),N(2),A(e.PayUrl),O(e.QrCode),E(e.TradeNumber)})},children:"下一步"})})]}),2===v&&p[1]&&(0,a.jsx)("div",{className:"flex flex-col justify-start items-center w-full  min-w-[600px] text-base max-w-xs mt-8  ",children:(0,a.jsxs)("div",{className:"flex flex-col justify-start items-center w-full  min-w-[600px] text-base max-w-xs my-8  ",children:[(0,a.jsxs)("div",{className:"flex flex-row  w-[500px] justify-start ",children:[" ","alipay"==C?"支付宝":"微信"," 扫描下方二维码进行支付 "]}),(0,a.jsxs)("div",{className:"flex flex-row  w-[400px] justify-start mt-2",children:[" ",(0,a.jsx)("img",{src:D})," "]}),!!((o=navigator.userAgent.toLowerCase()).indexOf("mobile")>-1||o.indexOf("ipad")>-1||o.indexOf("iphone")>-1||o.indexOf("android")>-1)&&(0,a.jsxs)("div",{className:"flex flex-row  w-[500px] justify-start flex-nowrap gap-4 mt-4",children:[(0,a.jsx)("div",{children:"或者"}),(0,a.jsxs)("a",{href:Z,target:"_blank",className:"flex flex-row   justify-start items-center h-full max-w-lg gap-4 text-base self-center mt-8 bg-blue-400 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded ",children:[" 或使用","alipay"===C?"支付宝":"微信"," APP支付 "]})]})]})})]},"MyOrder")}}}]);