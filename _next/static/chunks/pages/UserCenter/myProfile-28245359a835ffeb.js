(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8735],{2355:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/UserCenter/myProfile",function(){return t(1855)}])},1855:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return d},unixTime:function(){return u}});var s=t(5893),l=t(7294),r=t(1138),a=t(9443),i=t(4178),o=t(7379);t(9036);let u=()=>Math.floor(new Date().getTime()/1e3),c=e=>{let{id:n}=e,[t,a]=(0,l.useState)(0);return(0,s.jsxs)("div",{style:{margin:"0 0 1em 0"},children:[(0,s.jsxs)("div",{className:" flex flex-row justify-start w-full items-center font-sans border-b",children:[(0,s.jsx)("div",{style:{margin:"0 1em 0 0"},children:"头像"}),(0,s.jsx)("img",{src:(0,r.en)(r.E.HGET,"UserAvatar",n,r.DF.jpeg,"*")+"?t=".concat(t),alt:""})]}),(0,s.jsxs)("div",{className:" flex flex-row justify-between w-full items-center font-sans ",children:[(0,s.jsx)("input",{type:"file",style:{display:"none"},id:"upload_avatar",onChange:e=>{var n=new FileReader;n.readAsArrayBuffer(e.target.files[0]),n.onloadend=function(e){if(e.target.readyState===FileReader.DONE){var n=e.target.result,t=new Uint8Array(n);(0,r.bl)("userResetAvatar",{Avatar:t}).then(e=>a(u()))}}}}),(0,s.jsx)("button",{style:{margin:"1em 0 0 0"},onClick:e=>document.getElementById("upload_avatar").click(),children:"修改头像"})]})]})},f=e=>{let n={Title:["Complete my profile","完善我的资料"][e],footer:["Every thing you pursuit, there's an answer","你总在乎的，终有答案"][e],save:["Save modification","保存修改"][e],channelName:["My channel name:","呢称："][e],noChannelName:["Write channel name here","缺失，在这里添加.."][e],noChannelNameError:["Channel name incomplete","未填写频道名称.."][e],loginAccount:["Login Account:","登录账号："][e],noLoginAccount:["Write real name here","缺失，在这里填写.."][e]};return n};function d(){(0,o.useRouter)(),(0,o.usePathname)();let{LoggedIn:e}=(0,l.useContext)(i.GlobalContext),n=f(1),[t,u]=(0,l.useState)(""),[d,m]=(0,l.useState)(""),[x,h]=(0,l.useState)(""),[w,v]=(0,l.useState)(""),[j,y]=(0,l.useState)(""),[b,g]=(0,l.useState)(""),[p,N]=(0,l.useState)(""),[C,_]=(0,l.useState)(""),k=t=>{if(!x){v(n.noChannelNameError);return}x&&p&&e&&a.qR.Get().jwt&&(0,r.bl)("userResetProfile",{Nick:x,Region:b,Introduction:j}).then(e=>{"ok"===e.response&&(_("已修改"),setTimeout(()=>_(""),2e3))})};return((0,l.useEffect)(()=>{a.qR.Get().IsValid()&&((0,r.uH)("UserInfo","@id").then(e=>{u(null==e?void 0:e.CountryCode),m(null==e?void 0:e.Phone),N(null==e?void 0:e.Account)}),(0,r.uH)("UserInfoPublic",a.qR.Pub()).then(e=>{h(null==e?void 0:e.Nick),y(null==e?void 0:e.Introduction),g(null==e?void 0:e.Region)}))},[e]),e)?(0,s.jsxs)("div",{className:"flex flex-col justify-center h-full items-center font-sans w-full",children:[(0,s.jsxs)("div",{className:"flex flex-col justify-center w-full min-w-max items-center font-sans max-w-sm bg-white text-black px-8 pt-12  ",children:[(0,s.jsx)("div",{className:"flex flex-row w-full justify-between mb-8 items-center",children:(0,s.jsx)("div",{children:(0,s.jsxs)("h2",{children:[" ",n.Title," "]})})}),(0,s.jsxs)("div",{className:"flex flex-row justify-between w-8/12 min-w-fit items-center font-sans  mb-4 self-start",children:[(0,s.jsxs)("div",{className:"flex flex-row",children:[(0,s.jsx)("div",{children:"手机号："}),(0,s.jsxs)("div",{className:" bg-gray-200 rounded px-2",children:[t," \xa0 | ",d]})]},"input-phone-number"),!!d&&(0,s.jsx)("div",{className:"  whitespace-nowrap",children:"\xa0 已经认证"})]}),(0,s.jsxs)("div",{className:" container max-w-2xl flex  flex-row justify-start  items-center font-sans  mb-4",children:[(0,s.jsx)("div",{children:n.channelName}),(0,s.jsx)("input",{placeholder:n.noChannelName,value:w||x,className:"flex flex-row justify-center w-fit items-center font-sans text bg-orange-50 rounded border-solid border-2 border-lime-200 px-2 py-1",style:{color:({button:{margin:"0 0 0 1em",lineHeight:1,border:"0px",width:"120px",background:"#FFFFFF"},inputColor:(e,n)=>e?"#f1403c":n?"#000":"#89a"}).inputColor(w,x)},onChange:e=>h(e.target.value),onClick:e=>v("")})]},"input-channel-conainer"),(0,s.jsx)(c,{id:a.qR.Pub()}),(0,s.jsx)("div",{className:"flex flex-row h-full self-start w-full rounded-md",children:(0,s.jsx)("textarea",{className:"flex flex-row justify-start self-start font-sans h-full  mb-4 ring-1  resize-none ",style:{width:"100%"},placeholder:"简介:","aria-label":"maximum height",value:j,rows:1,onChange:e=>y(e.target.value),minrows:3,onResize:void 0,onResizeCapture:void 0},"input-channel-name")}),(0,s.jsxs)("button",{className:"flex flex-row justify-center w-full items-center font-sans text-sm h-9 bg-sky-200 text-gray-700 rounded my-4",onClick:e=>k(e),disabled:!!C,children:[" ",C||n.save," "]},"sign-up-button")]}),(0,s.jsx)("div",{className:"flex flex-row justify-center w-full items-center font-sans  mb-8 mu-8 text-sm rounded"})]},"MyProfile".concat(e)):(0,s.jsx)("div",{className:"flex flex-col justify-center h-full items-center font-sans",children:"you should loggin first"})}}},function(e){e.O(0,[9288,361,6057,2601,1019,3717,9036,9774,2888,179],function(){return e(e.s=2355)}),_N_E=e.O()}]);