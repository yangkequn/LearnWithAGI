(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5405],{5097:function(e,t,l){"use strict";l.d(t,{V:function(){return n}});var a=l(1588),i=l(4867);function n(e){return(0,i.Z)("MuiDivider",e)}let r=(0,a.Z)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);t.Z=r},3599:function(e,t,l){"use strict";l.d(t,{Z:function(){return S}});var a=l(3366),i=l(7462),n=l(7294),r=l(6010),o=l(4780),s=l(1796),c=l(948),d=l(1657),u=l(9773),p=l(2607),m=l(8974),v=l(1705),f=l(5097),h=l(1588);let x=(0,h.Z)("MuiListItemIcon",["root","alignItemsFlexStart"]),g=(0,h.Z)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);var b=l(4867);function y(e){return(0,b.Z)("MuiMenuItem",e)}let w=(0,h.Z)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]);var N=l(5893);let Z=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],j=e=>{let{disabled:t,dense:l,divider:a,disableGutters:n,selected:r,classes:s}=e,c=(0,o.Z)({root:["root",l&&"dense",t&&"disabled",!n&&"gutters",a&&"divider",r&&"selected"]},y,s);return(0,i.Z)({},s,c)},k=(0,c.ZP)(p.Z,{shouldForwardProp:e=>(0,c.FO)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:l}=e;return[t.root,l.dense&&t.dense,l.divider&&t.divider,!l.disableGutters&&t.gutters]}})(({theme:e,ownerState:t})=>(0,i.Z)({},e.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${w.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,s.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${w.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:(0,s.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${w.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:(0,s.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,s.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${w.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${w.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${f.Z.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${f.Z.inset}`]:{marginLeft:52},[`& .${g.root}`]:{marginTop:0,marginBottom:0},[`& .${g.inset}`]:{paddingLeft:36},[`& .${x.root}`]:{minWidth:36}},!t.dense&&{[e.breakpoints.up("sm")]:{minHeight:"auto"}},t.dense&&(0,i.Z)({minHeight:32,paddingTop:4,paddingBottom:4},e.typography.body2,{[`& .${x.root} svg`]:{fontSize:"1.25rem"}}))),C=n.forwardRef(function(e,t){let l;let o=(0,d.Z)({props:e,name:"MuiMenuItem"}),{autoFocus:s=!1,component:c="li",dense:p=!1,divider:f=!1,disableGutters:h=!1,focusVisibleClassName:x,role:g="menuitem",tabIndex:b,className:y}=o,w=(0,a.Z)(o,Z),C=n.useContext(u.Z),S=n.useMemo(()=>({dense:p||C.dense||!1,disableGutters:h}),[C.dense,p,h]),$=n.useRef(null);(0,m.Z)(()=>{s&&$.current&&$.current.focus()},[s]);let O=(0,i.Z)({},o,{dense:S.dense,divider:f,disableGutters:h}),D=j(o),I=(0,v.Z)($,t);return o.disabled||(l=void 0!==b?b:-1),(0,N.jsx)(u.Z.Provider,{value:S,children:(0,N.jsx)(k,(0,i.Z)({ref:I,role:g,tabIndex:l,component:c,focusVisibleClassName:(0,r.Z)(D.focusVisible,x),className:(0,r.Z)(D.root,y)},w,{ownerState:O,classes:D}))})});var S=C},5557:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return l(1638)}])},1638:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return m}});var a=l(5893),i=l(9036),n=l(9332),r=l(7294),o=l(4178),s=l(1138);let c=e=>({title:"".concat(JSON.stringify(e))});var d=l(9443),u=l(4893);let p=e=>{var t;let{skillTree:l}=e,i=(0,n.useRouter)();return(0,a.jsxs)("div",{className:"flex flex-col w-60 h-60 max-h-60 max-w-md flex-auto rounded-xl",style:{boxShadow:"inset 0px 0px 0px 1000px rgba(255,255,255,0.25)",minWidth:330},children:[(0,a.jsxs)("div",{title:null==l?void 0:l.Name,className:"w-full min-h-12 max-h-40  bg-yellow-50  rounded-t-xl text-base px-1 py-3 overflow-hidden",children:["      ",null==l?void 0:l.Name,"    "]},"title"),(0,a.jsxs)("div",{className:"flex flex-col w-full h-full  overflow-scroll text-sky-700 gap-2 hover:bg-stone-100 p-1",onClick:()=>i.push("/skill?t=".concat(l.Name,":").concat(l.Detail)),children:[(0,a.jsx)("div",{className:"flex flex-col gap-1",children:(0,a.jsx)("div",{className:"pl-4",children:null==l?void 0:l.Detail})},"skill-topic-".concat(null==l?void 0:l.Name,"-").concat(null==l?void 0:l.Detail)),null==l?void 0:null===(t=l.Sessions)||void 0===t?void 0:t.map((e,t)=>(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("div",{children:null==e?void 0:e.Name}),"  ",(0,a.jsx)("div",{className:"pl-4",children:null==e?void 0:e.Detail})]},"skill-topic-".concat(e.Name,"-").concat(e.Detail)))]},"detail")]},"skill-container")};function m(){let{Params:e,LoggedIn:t,RedirectUrl:l,setRedirectUrl:m,MenuL2:v,setMenuL2:f}=(0,r.useContext)(o.GlobalContext),{search:h}=e,[x,g]=(0,r.useState)(""),[b,y]=(0,r.useState)("");(0,n.useRouter)();let[w,N]=(0,r.useState)([]),[Z,j]=(0,r.useState)({}),[k,C]=(0,r.useState)(0),[S,$]=(0,r.useState)("");return(0,r.useEffect)(()=>{f((0,a.jsxs)("div",{className:"flex flex-row w-full items-center justify-between s gap-8 mx-4",children:[(0,a.jsx)("div",{children:"以下是搜索结果"}),(0,a.jsx)(u.default,{})]}))},[h]),(0,r.useEffect)(()=>{h&&x!=h&&(g(h),(0,s.bl)("SkillSearch",{Name:h}).then(e=>{if(e&&Array.isArray(e)){j(e.reduce((e,t)=>(e[(null==t?void 0:t.Name)+":"+(null==t?void 0:t.Detail)]=t,e),Z));var t=e.map(e=>e.Name+":"+e.Detail);N(t=[...new Set(t)]),C(new Date().getTime())}})),!h&&d.qR.Id()&&!b&&(y("searched"),(0,s.bl)("SkillRecommend",{}).then(e=>{if(e&&Array.isArray(e)){j(e.reduce((e,t)=>(e[(null==t?void 0:t.Name)+":"+(null==t?void 0:t.Detail)]=t,e),Z));var t=[...e.map(e=>e.Name+":"+e.Detail),...w];N(t=[...new Set(t)]),C(new Date().getTime())}}))},[h,w]),(0,r.useEffect)(()=>{if((!h||w&&0!=w.length)&&document.querySelector("#load-more")){let e=new IntersectionObserver(function(e){e[0].intersectionRatio<=0||((0,s.Zi)("SkillTree",30).then(e=>{(0,s.f2)("SkillTree",e).then(t=>{j(t.reduce((e,t)=>(e[(null==t?void 0:t.Name)+":"+(null==t?void 0:t.Detail)]=t,e),Z)),N([...w,...e]),C(new Date().getTime())})}),document.querySelector("#load-more").scrollIntoView({behavior:"smooth",block:"center"}))});return e.observe(document.querySelector("#load-more")),()=>{e.disconnect()}}},[w]),(0,a.jsx)(i.Z,{children:(0,a.jsxs)("div",{className:"w-full h-full px-4 pt-2",children:[!!h&&(!S||"searching"==S)&&(0,a.jsx)("div",{className:"flex flex-row justify-center animate-pulse",children:(0,a.jsx)("div",{children:"正在生成新的主题列表..."})}),(0,a.jsx)("div",{className:"flex flex-row w-full flex-wrap columns-7 gap-8 flex-grow pt-2",children:!!k&&(null==w?void 0:w.map(e=>(0,a.jsx)(p,{...c(e),skillTree:Z[e]},"".concat(e))))},"search-results"),(0,a.jsx)("div",{id:"load-more",className:"flex flex-row items-center justify-center w-full h-12 text-lg font-bold text-yellow-700 hover:bg-orange-200 rounded-md px-2 ",children:" 正在加载更多"})]})})}},4893:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return u}});var a=l(5893),i=l(9332),n=l(7294);l(9443);var r=l(4178),o=l(1138),s=l(4054),c=l(303),d=l(3599);function u(){let e=(0,i.useRouter)(),[t,l]=(0,n.useState)([]),{LoggedIn:u}=(0,n.useContext)(r.GlobalContext);return(0,n.useEffect)(()=>{u&&(0,o.Nb)("SkillMyTouchTime:@id",0,100).then(e=>{l(e)})},[u]),u&&(0,a.jsx)(s.Z,{variant:"standard",sx:{ml:2,minWidth:160},children:(0,a.jsxs)(c.Z,{labelId:"select-history-topic",id:"select-history-topic",value:"",label:"Age",inputProps:{"aria-label":"Without label"},displayEmpty:!0,onChange:t=>!!t.target.value&&e.push("/skill?t=".concat(t.target.value)),children:[(0,a.jsxs)(d.Z,{value:"",children:[" ",(0,a.jsx)("em",{children:"切换到 最近学习:"})," "]}),null==t?void 0:t.map((e,t)=>(0,a.jsx)(d.Z,{value:e,children:e},"menu-item-".concat(e)))]})})}}},function(e){e.O(0,[9288,361,6057,2601,7910,1019,1412,3717,9036,9774,2888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);