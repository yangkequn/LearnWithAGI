(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4106],{6785:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Auth/login",function(){return n(1813)}])},1085:function(e,t,n){"use strict";n.r(t),n.d(t,{AuthContext:function(){return l},default:function(){return u}});var r=n(5893),o=n(7294),s=n(1138);let l=o.createContext({nickname:"",setNickname:()=>{},nicknameError:"",countryCode:"86",setCountryCode:()=>{},countryCodeError:"",phone:"",setPhone:()=>{},phoneError:"",setPhoneError:()=>{},account:"",setAccount:()=>{},accountError:"",setAccountError:()=>{},password:"",setPassword:()=>{},passwordError:"",setPasswordError:()=>{},foreignPhone:!1,setForeignPhone:()=>{},SMSCode:null,setSMSCode:()=>{},SMSCodeError:null,setSMSCodeError:()=>{},SMSButtonText:"获取校验码",SMSButtonDisabled:!1,SendSMSCode:()=>{},checkSMSCode:()=>{},CheckPassword:()=>{},checkAccount:()=>{},checkPhone:()=>{},checkCountryCode:()=>{},CheckNickName:()=>{}});function u(e){let{children:t}=e,[n,u]=(0,o.useState)(""),[i,a]=(0,o.useState)(""),[c,d]=(0,o.useState)("86"),[h,f]=(0,o.useState)(""),g=()=>{let e="";return(!c||isNaN(c))&&(e="无效国家，重新选择"),f(e),!e},[S,x]=(0,o.useState)(""),[w,C]=(0,o.useState)(""),[m,p]=(0,o.useState)(null),[A,P]=(0,o.useState)(null),[v,j]=(0,o.useState)("获取校验码"),[b,k]=(0,o.useState)(!1),N=e=>{e>0?(j("已发送, "+e+" ..."),setTimeout(()=>N(e-1),1e3),k(!0)):(j("重新获取"),k(!1))},[y,E]=(0,o.useState)(""),[T,_]=(0,o.useState)(""),M=e=>!0===e&&_("该账号已经注册"),[L,F]=(0,o.useState)(""),[O,U]=(0,o.useState)(""),[Z,I]=(0,o.useState)(!1);return(0,r.jsx)(l.Provider,{value:{nickname:n,setNickname:u,nicknameError:i,countryCode:c,setCountryCode:d,countryCodeError:h,phone:S,setPhone:x,phoneError:w,setPhoneError:C,account:y,setAccount:E,accountError:T,setAccountError:_,password:L,setPassword:F,passwordError:O,setPasswordError:U,foreignPhone:Z,setForeignPhone:I,SMSCode:m,setSMSCode:p,SMSCodeError:A,setSMSCodeError:P,SMSButtonText:v,SMSButtonDisabled:b,SendSMSCode:e=>{e()&&(N(60),(0,s.bl)("userSendSMSCode",{countryCode:c,phone:S}))},checkSMSCode:()=>{let e="";return"none"===m?e="请填写校验码":6!==m.length&&(e="校验码为六位"),P(e),!e},CheckPassword:()=>{let e="";return L||(e="密码必须填写"),(L.length<8||L.length>32)&&(e="密码8-32位"),U(e),!e},checkAccount:function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t="";return y||(t="账号必须填写"),(y.length<6||y.length>32)&&(t="账号6-32位"),_(t),!t&&e&&(0,s.Jp)("UserRootAccount",y).then(M).catch(e=>null),!t},checkPhone:()=>{let e="";if(S||(e="常用手机号必填"),S.length>=7&&S.length<=13?S.match(/^[+]?[(]?[0-9]{3}[)]?[-\s.]?[0-9]{3}[-\s.]?[0-9]{4,6}$/im)||(e="不是完整有效手机号码"):e="手机号码7-13位",C(e),!e&&g()){var t=S;"086"===c||"86"===c||(t="86"+t),(0,s.Jp)("UserRootAccount",t).then(e=>!0===e&&C("该账号已经注册")).catch(e=>null)}return!e},checkCountryCode:g,CheckNickName:()=>{let e="";if(n){let t=n.length;(t>32||t<5)&&(e="昵称 5-32字符")}else e="昵称不能为空";return a(e),!e}},children:t})}},6248:function(e,t,n){"use strict";n.r(t),n.d(t,{AuthContainerCSS:function(){return o},AuthContainerCSSL2:function(){return s},AuthInputContainerCss:function(){return l},AuthPages:function(){return i},AuthSingleLineInputCss:function(){return u},default:function(){return a}});var r=n(5893);n(7294);let o="flex flex-col w-full max-w-3xl h-90 bg-cyan-900 items-center",s="flex flex-col w-full bg-white text-black px-8 pt-8 text-lg mb-8",l="flex flex-row w-full justify-between md-4",u=" mx-4 w-90",i={SignUp:"SignUp",ForgotPassword:"ForgotPassword",Login:"Login"};function a(){return(0,r.jsx)("div",{})}},1813:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}});var r=n(5893),o=n(7294),s=n(8271),l=n(6901),u=n(7922),i=n(3321),a=n(5582),c=n(6248),d=n(342),h=n(1085),f=n(1138),g=n(9443),S=n(6426),x=n(9332),w=n(4178);function C(e){let{To:t}=e,n=(0,x.useRouter)(),C=(e=>{let t={Title:["Login","账号登录"][e],CountryCodeTitle:["US +","美国 +"][e],AccountTitle:["Type Account Here","手机号/账号"][e],ForeignPhoneMode:["Foreign phone login","海外手机号登录"][e],ForgotPassword:["Forgot password","忘记密码?"][e],MailAccountLogin:["Login with phone or email","邮箱帐号登录"][e],CountryCode:[1,86][e],PhoneNumberTitle:["phone Number","请输入手机号"][e],AccountPasswordError:["Error account or password ","账号或密码错误"][e],PhoneBadFormat:["phone number invalid","输入有效的手机号码"],PasswordTitle:["Password","登录密码"][e],PasswordBadFormat:["password too short","密码太短"][e],LoginTitle:["Login","登录"][e],WithoutAnAccount:["Don't have an account yet?","没有账号？"][e],Signup:["Sign up","注册"][e],Footer:["Together, life is bigger","在一起，生命更放大"][e]};return t})(1),{countryCode:m,setCountryCode:p,countryCodeError:A,phone:P,setPhone:v,phoneError:j,account:b,setAccount:k,accountError:N,setAccountError:y,password:E,setPassword:T,passwordError:_,foreignPhone:M,setForeignPhone:L,checkCountryCode:F,checkPhone:O,checkAccount:U,CheckPassword:Z}=(0,o.useContext)(h.AuthContext),{openAlert:I,setOpenAlert:R}=(0,o.useContext)(w.GlobalContext);(0,o.useEffect)(()=>{m&&F()},[m]),(0,o.useEffect)(()=>{P&&O()},[P]),(0,o.useEffect)(()=>{b&&U(!1)},[b]),(0,o.useEffect)(()=>{E&&Z()},[E]);let q=e=>{let t=M&&F()&&O()&&Z();if(t||(t=!M&&U(!1)&&Z()),!t)return;let n={Account:b||P,Password:E,CountryCode:m,Time:new Date().getTime()};(0,f.bl)("userSignIn",n).then(e=>{if(null!=e){if("error"in e){let t=e.error;"account or password error"===t&&y(C.AccountPasswordError),R("账号或密码错误"),g.qR.SaveOrClear(e)}else g.qR.SaveOrClear(e)}})};return(0,r.jsx)("div",{className:c.AuthContainerCSS,children:(0,r.jsx)(S.rg,{clientId:"129830787781-sd5edo6nis08ohho627s3v2vk405795r.apps.googleusercontent.com",children:(0,r.jsxs)("div",{className:c.AuthContainerCSSL2,children:[(0,r.jsx)("div",{className:"ml-4",children:(0,r.jsxs)("h2",{children:[" ",C.Title," "]})}),(0,r.jsx)(u.Z,{in:!!I,children:(0,r.jsx)(l.Z,{severity:"info",children:I})}),(0,r.jsxs)("div",{className:"w-full flex flex-col",children:[M&&(0,r.jsxs)("div",{className:"flex flex-row self-start w-full ",style:{display:M?"flex":"none"},children:[(0,r.jsx)(d.default,{width:"150px",disableCloseOnSelect:!0,defaultValue:"CN",setCountryCode:p,countryCodeError:A,children:" "}),(0,r.jsx)(s.Z,{id:"signUp-phone",label:j||C.PhoneNumberTitle,size:"small",variant:"standard",error:!!j,onChange:e=>v(e.target.value),style:{width:"70%"}})]}),!M&&(0,r.jsx)(s.Z,{id:"login-phone",label:N||C.AccountTitle,size:"small",variant:"standard",className:c.AuthSingleLineInputCss,error:!!N,onChange:e=>k(e.target.value)}),(0,r.jsx)(s.Z,{id:"login-password",label:_||C.PasswordTitle,size:"small",type:"password",variant:"standard",className:c.AuthSingleLineInputCss,error:!!_,onChange:e=>T(e.target.value)}),(0,r.jsxs)(a.Z,{className:"flex flex-row self-start w-full justify-between",sx:{color:"#25a",margin:"1.3em 0 1.0em 0"},children:[(0,r.jsx)(i.Z,{onClick:e=>{let t=!M;p(t?"1":"86"),t?k(""):v(""),L(!M)},children:M?C.MailAccountLogin:C.ForeignPhoneMode}),(0,r.jsx)("div",{onClick:e=>n.push("/Auth?page=".concat(c.AuthPages.ForgotPassword,"&to=").concat(t)),style:{color:"#8590a6"},children:C.ForgotPassword},"user_forgot_password")]},"user_foreign_phone"),(0,r.jsxs)("div",{className:"w-full flex flex-row justify-between mb-4",children:[(0,r.jsx)("button",{className:"flex leading-6 text-sm w-40 h-9 bg-sky-500 justify-center text-white rounded items-center mx-4",onClick:e=>q(e),children:C.LoginTitle},"login-button"),(0,r.jsxs)("div",{className:"flex flex-row items-center mx-4 w-90 w-fit",children:[(0,r.jsx)("div",{children:C.WithoutAnAccount}),(0,r.jsx)("button",{className:"flex leading-6 text-sm w-32 h-9 bg-sky-500 justify-center text-white rounded items-center mx-4",onClick:e=>n.push("/Auth?page=".concat(c.AuthPages.SignUp,"&to=").concat(t)),children:C.Signup})]},"SignUP")]})]}),(0,r.jsx)("div",{className:"w-full",children:(0,r.jsx)(S.kZ,{onSuccess:e=>{(0,f.bl)("userSignInGoogle",e).then(e=>{if(null!=e){if("error"in e){let t=e.error;"account or password error"===t&&y(C.AccountPasswordError),R("账号或密码错误"),g.qR.SaveOrClear(e)}else g.qR.SaveOrClear(e),n.push(t)}})},onError:()=>{},useOneTap:!0})})]})})})}}},function(e){e.O(0,[9288,9521,1999,3428,2601,7910,1412,6901,6758,9679,3727,342,9774,2888,179],function(){return e(e.s=6785)}),_N_E=e.O()}]);