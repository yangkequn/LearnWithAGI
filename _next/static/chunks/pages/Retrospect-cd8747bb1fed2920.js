(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9872],{102:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Retrospect",function(){return l(88)}])},88:function(e,t,l){"use strict";l.r(t),l.d(t,{Retrospect:function(){return i}});var n=l(5893),c=l(7294),a=l(1138),s=l(9036),o=l(1740),r=l(4386);let i=()=>{let[e,t]=c.useState([{date:"2023-01-01",count:1,level:1,SkillAsk:0,SkillAnswer:0},{date:"2023-06-01",count:1,level:1,SkillAsk:0,SkillAnswer:0}]),l=()=>{var e=new Date-157248e5,l=new Date(e).toISOString().slice(0,10).replace(/-/g,""),n=new Date().toISOString().slice(0,10).replace(/-/g,"");(0,a.BB)("Credit:@pub",l,n,!0).then(e=>{if(!e||!e.members||0==e.members.length){t([]);return}let l=[];for(let e=0;e<=182;e++){let t=new Date;t.setDate(t.getDate()-(182-e));let n=t.getMonth()+1,c=t.getDate(),a="".concat(t.getFullYear(),"-").concat(n<10?"0"+n:n,"-").concat(c<10?"0"+c:c);l.push({date:a,count:0,SkillAsk:0,SkillAnswer:0})}let n=e.members,c=e.scores,a=n.map((e,t)=>{let l=c[t].toString();return{date:"".concat(l[0]).concat(l[1]).concat(l[2]).concat(l[3],"-").concat(l[4]).concat(l[5],"-").concat(l[6]).concat(l[7]),count:e.SkillAsk+e.SkillAnswer,SkillAsk:e.SkillAsk,SkillAnswer:e.SkillAnswer}}),s=(l=l.map(e=>a.find(t=>t.date==e.date)||e)).map(e=>e.count).filter(e=>e>0);s.push(0),s.sort((e,t)=>e-t);let o=s.map((e,t)=>[e,Math.floor(5*t/(s.length-1))]);o=Object.fromEntries(o),t(l=l.map(e=>{let t=o[e.count];return e.count>0&&(t=Math.max(1,t)),{...e,level:t}}))})};return(0,c.useEffect)(()=>{l()},[]),(0,n.jsx)(s.Z,{children:(0,n.jsxs)("div",{className:"container flex flex-col h-full w-full max-w-5xl",children:[(0,n.jsx)("div",{className:"flex flex-col h-full w-full bg-gray-light py-4 mt-1  min-h-[512px]  ",children:(0,n.jsx)(o.ZP,{data:e,blockSize:28,colorScheme:"light",labels:{legend:{less:"Less",more:"More"},months:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],totalCount:"{{count}} credits in half year",weekdays:["7","1","2","3","4","5","6"]},eventHandlers:{onClick:e=>e=>{console.log("data",e)}},renderBlock:(e,t)=>(0,n.jsx)(r.Z,{title:"".concat(t.SkillAnswer," 作答 ").concat(t.SkillAsk," 提问 ").concat(t.count," activities on ").concat(t.date," "),onClick:e=>console.log("activity",t),children:e})})}),(0,n.jsx)("div",{className:" flex flex-row justify-start items-start self-start w-[90%] flex-1 h-full"})]},"history")})};t.default=i}},function(e){e.O(0,[9288,361,6057,2601,1019,3717,1740,9036,9774,2888,179],function(){return e(e.s=102)}),_N_E=e.O()}]);